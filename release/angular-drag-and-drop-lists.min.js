var dndList;!function(e){function n(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];return function(n){var t=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(e,n,t){t.prototype=e.prototype;var r=new t,d=e.apply(r,n);return"object"==typeof d?d:r}(n,e,function(){return null})};return t.$inject=e,t}}e.directive=n}(dndList||(dndList={}));var dndList;!function(e){var n=function(){function e(){}return e}();angular.module("dndLists",[]).service("dndService",n)}(dndList||(dndList={}));var __decorate=this&&this.__decorate||function(e,n,t,r){var d,o=arguments.length,i=o<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,n,t,r);else for(var a=e.length-1;a>=0;a--)(d=e[a])&&(i=(o<3?d(i):o>3?d(n,t,i):d(n,t))||i);return o>3&&i&&Object.defineProperty(n,t,i),i},dndList;!function(e){var n=function(){function n(e,n,t){var r=this;this.$parse=e,this.$timeout=n,this.dndService=t,this.link=function(e,n,t){var d=r,o=0,i=0,a=0,c=0,l=!1;n.on("click touchstart",function(n){t.dndSelected&&(e.$apply(function(){d.$parse(t.dndSelected)(e,{event:n})}),n.stopPropagation())});var s=function(e){if("string"!=typeof e)interact(e).draggable(!1);else{e=n[0].querySelectorAll(e);for(var t=0;t<e.length;t++)s(e[t])}},v=function(r){if("string"!=typeof r)interact(r).draggable({inertia:!0,autoScroll:!0}).on("dragstart",function(r){var s=n[0].getBoundingClientRect();o=s.left-r.clientX,i=s.top-r.clientY,a=0,c=0,n.addClass("dndDragging"),d.dndService.draggingObject=e.$eval(t.dndDraggable),d.dndService.stopDrop=l,d.dndService.isDroped=!1,d.dndService.draggingElement=n[0],d.$timeout(function(){d.$parse(t.dndDragstart)(e,{event:r})},0)}).on("dragend",function(r){d.$timeout(function(){var o=n[0];o.style.webkitTransform=o.style.transform=null,n.removeClass("dndDragging"),d.dndService.isDroped?d.$parse(t.dndMoved)(e,{event:r}):d.$parse(t.dndCanceled)(e,{event:r}),d.$parse(t.dndDragend)(e,{event:r,isDroped:d.dndService.isDroped}),d.dndService.isDroped=!1},0)}).on("dragmove",function(e){var t=n[0].getBoundingClientRect(),r=n[0];a+=e.clientX-t.left+o,c+=e.clientY-t.top+i,r.style.webkitTransform=r.style.transform="translate("+a+"px, "+c+"px)"});else{r=n[0].querySelectorAll(r);for(var s=0;s<r.length;s++)v(r[s])}};if(t.dndHandle){var u=e.$eval(t.dndHandle);v(u),e.$watch(t.dndHandle,function(e,n,t){s(n),v(e)})}else v(n[0]);t.dndNodrop&&(l=e.$eval(t.dndNodrop),e.$watch(t.dndNodrop,function(e){1==e?interact(n[0]).draggable(!1):interact(n[0]).draggable(!0),l=e}))}}return n=__decorate([e.directive("$parse","$timeout","dndService")],n)}();angular.module("dndLists").directive("dndDraggable",n)}(dndList||(dndList={}));var __decorate=this&&this.__decorate||function(e,n,t,r){var d,o=arguments.length,i=o<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,n,t,r);else for(var a=e.length-1;a>=0;a--)(d=e[a])&&(i=(o<3?d(i):o>3?d(n,t,i):d(n,t))||i);return o>3&&i&&Object.defineProperty(n,t,i),i},dndList;!function(e){var n=function(){function n(e,n,t){var r=this;this.$parse=e,this.$timeout=n,this.dndService=t,this.link=function(e,n,t){var d=(t.dndHorizontalList&&e.$eval(t.dndHorizontalList),r.getPlaceholderElement(n)),o=d[0],i=n[0];d.remove();var a=r,c=0,l=0;interact(n[0]).dropzone({}).on("dragenter",function(e){c=0,l=0}).on("dragleave",function(e){return a.stopDragover(d,n)}).on("dropmove",function(r){var c=angular.element(a.dndService.draggingElement);o.parentNode!=i&&n.append(d);var l,s=c.css("z-index");if(c.css("z-index",-99999),l=document.elementFromPoint(r.dragEvent.clientX,r.dragEvent.clientY),c.css("z-index",s),l!==i){for(var v=l;v.parentNode!==i&&v.parentNode;)v=v.parentNode;v.parentNode===i&&v!==o&&(a.isMouseInFirstHalf(r,v)?i.insertBefore(o,v):i.insertBefore(o,v.nextElementSibling))}t.dndDragover&&!a.invokeCallback(e,t.dndDragover,r,a.getPlaceholderIndex(i,o),a.dndService.draggingObject)&&a.stopDragover(d,n),n.addClass("dndDragover")}).on("drop",function(r){var c=a.dndService.draggingObject;return c?(c=angular.copy(c),void a.$timeout(function(){if(a.dndService.stopDrop)return a.stopDragover(d,n);var l=a.getPlaceholderIndex(i,o);return l<0?a.stopDragover(d,n):t.dndDragover&&!a.invokeCallback(e,t.dndDragover,r,l,c)?a.stopDragover(d,n):(a.dndService.isDroped=!0,t.dndDrop&&(c=a.invokeCallback(e,t.dndDrop,r,l,c),!c)?a.stopDragover(d,n):(c!==!0&&e.$apply(function(){e.$eval(t.dndList).splice(l,0,c)}),a.invokeCallback(e,t.dndInserted,r,l,c),void a.stopDragover(d,n)))},0)):a.stopDragover(d,n)})}}return n.prototype.isMouseInFirstHalf=function(e,n,t){void 0===t&&(t=!1);var r=e.dragEvent,d=t?r.clientX:r.clientY,o=n.getBoundingClientRect(),i=t?o.width:o.height,a=t?o.left:o.top;return d<a+i/2},n.prototype.stopDragover=function(e,n){return e.remove(),n.removeClass("dndDragover"),!0},n.prototype.getPlaceholderIndex=function(e,n){return Array.prototype.indexOf.call(e.children,n)},n.prototype.invokeCallback=function(e,n,t,r,d){return void 0===d&&(d=null),this.$parse(n)(e,{event:t,index:r,item:d||void 0})},n.prototype.getPlaceholderElement=function(e){var n;return angular.forEach(e.children(),function(e){var t=angular.element(e);t.hasClass("dndPlaceholder")&&(n=t)}),n||angular.element("<li class='dndPlaceholder'></li>")},n=__decorate([e.directive("$parse","$timeout","dndService")],n)}();angular.module("dndLists").directive("dndList",n)}(dndList||(dndList={}));