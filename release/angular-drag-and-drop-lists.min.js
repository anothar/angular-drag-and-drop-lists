var dndList;!function(e){function n(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];return function(n){var t=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(e,n,t){t.prototype=e.prototype;var r=new t,d=e.apply(r,n);return"object"==typeof d?d:r}(n,e,function(){return null})};return t.$inject=e,t}}e.directive=n}(dndList||(dndList={}));var dndList;!function(e){var n=function(){function e(){}return e}();angular.module("dndLists",[]).service("dndService",n)}(dndList||(dndList={}));var __decorate=this&&this.__decorate||function(e,n,t,r){var d,i=arguments.length,a=i<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,t,r);else for(var o=e.length-1;o>=0;o--)(d=e[o])&&(a=(i<3?d(a):i>3?d(n,t,a):d(n,t))||a);return i>3&&a&&Object.defineProperty(n,t,a),a},dndList;!function(e){var n=function(){function n(e,n,t){var r=this;this.$parse=e,this.$timeout=n,this.dndService=t,this.link=function(e,n,t){var d,i,a,o,l=r,c=0,s=0,g=0,v=0,p=!1,u=function(r){if("string"!=typeof r)D=r,interact(r).draggable({manualStart:!0}).on("move",function(r){if(!p&&!e.disabled){var u=r.interaction;if(u.pointerIsDown&&!u.interacting()){angular.element(document.body).addClass("dndDraggingBody"),p=!0;for(var f=n[0],h=f.querySelectorAll("[dnd-list]"),D=0;D<h.length;D++){var m=h[D];interact(m).dropzone(!1)}var b=f.getBoundingClientRect();c=b.left-r.clientX,s=b.top-r.clientY,g=0,v=0;var y=n[0].cloneNode(!0),S=angular.element(y);d=n.parent()[0],o=n.css("height"),a=n.css("width"),i=f.nextElementSibling,S.addClass("dndDragging"),S.css("width",b.width+"px"),S.css("height",b.height+"px"),document.body.appendChild(S[0]),b=f.getBoundingClientRect(),g+=r.clientX-b.left+c,v+=r.clientY-b.top+s,y.style.webkitTransform=y.style.transform="translate("+g+"px, "+v+"px)",l.dndService.draggingObject=e.$eval(t.dndDraggable),l.dndService.isDroped=!1,l.dndService.draggingElementScope=e,l.dndService.draggingElement=y,l.$timeout(function(){l.$parse(t.dndDragstart)(e,{event:r})},0),interact(y).draggable({inertia:!0,autoScroll:!1}),r.interaction.start({name:"drag"},r.interactable,y),f.style.display="none"}}}).on("dragend",function(t){if(!e.disabled&&(t.interaction.stop(),t.target&&t.target.parentNode)){t.target.parentNode.removeChild(t.target);for(var r=n[0].querySelectorAll("[dnd-list]"),d=0;d<r.length;d++){var i=r[d];interact(i).dropzone(!0)}l.$timeout(function(){e.endDrag(t),n[0].style.display="block",angular.element(document.body).removeClass("dndDraggingBody")},0)}}).on("dragmove",function(n){if(!e.disabled){var t=n.target.getBoundingClientRect(),r=n.target;g+=n.clientX-t.left+c,v+=n.clientY-t.top+s,r.style.webkitTransform=r.style.transform="translate("+g+"px, "+v+"px)"}});else{r=n[0].querySelectorAll(r);for(var f=0;f<r.length;f++)u(r[f])}};t.ngDisabled&&(e.disabled=e.$eval(t.ngDisabled),e.$watch(t.ngDisabled,function(n,t){e.disabled=n,n?(m(),e.endDrag(null)):u(D)}));var f=function(n){e.disabled||t.dndSelected&&(e.$apply(function(){l.$parse(t.dndSelected)(e,{event:n})}),n.stopPropagation())},h=function(){n.off("click touchstart",f),n.on("click touchstart",f)};h();var D,m=function(){interact(D).draggable(!1)};if(e.endDrag=function(r){if(p){p=!1;var c=n[0];c.style.webkitTransform=null,c.style.transform=null,n.removeClass("dndDragging"),n.remove();var s=function(){n.css("height",o),n.css("width",a),i?d.insertBefore(c,i):d.appendChild(c),c.style.webkitTransform=null,c.style.transform="translate(0,0)",h()};return l.dndService.isDroped?l.$parse(t.dndMoved)(e,{event:r})?(l.$parse(t.dndDragend)(e,{event:r,isDroped:l.dndService.isDroped}),l.dndService.isDroped=!1,!0):(s(),l.dndService.isDroped=!1,!1):(s(),l.$parse(t.dndCanceled)(e,{event:r}),!1)}},t.dndHandle){var b=e.$eval(t.dndHandle);u(b),e.$watch(t.dndHandle,function(e,n,t){m(),u(e)})}else u(n[0])}}return n=__decorate([e.directive("$parse","$timeout","dndService")],n)}();angular.module("dndLists").directive("dndDraggable",n)}(dndList||(dndList={}));var __decorate=this&&this.__decorate||function(e,n,t,r){var d,i=arguments.length,a=i<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,t,r);else for(var o=e.length-1;o>=0;o--)(d=e[o])&&(a=(i<3?d(a):i>3?d(n,t,a):d(n,t))||a);return i>3&&a&&Object.defineProperty(n,t,a),a},dndList;!function(e){var n=function(){function n(e,n,t){var r=this;this.$parse=e,this.$timeout=n,this.dndService=t,this.link=function(e,n,t){var d=(t.dndHorizontalList&&e.$eval(t.dndHorizontalList),r.getPlaceholderElement(n)),i=d[0],a=n[0];d.remove();var o=r,l=0,c=0;interact(n[0]).dropzone({}).on("dragenter",function(n){e.disabled||(l=0,c=0,o.dndService.isDroped=!1)}).on("dragleave",function(e){return o.stopDragover(d,n)}).on("dropmove",function(r){if(e.disabled)return o.stopDragover(d,n);var l=angular.element(o.dndService.draggingElement);i.parentNode!=a&&n.append(d);var c,s=l.css("display");if(l.css("display","none"),c=document.elementFromPoint(r.dragEvent.clientX,r.dragEvent.clientY),l.css("display",s),c!==a){for(var g=c;g.parentNode!==a&&g.parentNode;)g=g.parentNode;g.parentNode===a&&g!==i&&(o.isMouseInFirstHalf(r,g)?a.insertBefore(i,g):a.insertBefore(i,g.nextElementSibling))}t.dndDragover&&!o.invokeCallback(e,t.dndDragover,r,o.getPlaceholderIndex(a,i),o.dndService.draggingObject)&&o.stopDragover(d,n),n.addClass("dndDragover")}).on("drop",function(r){if(!o.dndService.isDroped){if(e.disabled)return o.stopDragover(d,n);var l=o.dndService.draggingObject;if(!l)return o.stopDragover(d,n);l=angular.copy(l),o.$timeout(function(){if(o.dndService.stopDrop)return o.dndService.isDroped=!1,o.dndService.draggingElementScope.endDrag(),o.stopDragover(d,n);var c=o.getPlaceholderIndex(a,i);if(c<0)return o.stopDragover(d,n);if(t.dndDragover&&!o.invokeCallback(e,t.dndDragover,r,c,l))return o.stopDragover(d,n);if(t.dndBeforeDrop){var s=o.invokeCallback(e,t.dndBeforeDrop,r,c,l);if(!s)return o.dndService.isDroped=!1,o.dndService.draggingElementScope.endDrag(r),o.stopDragover(d,n)}return o.dndService.isDroped=!0,o.dndService.draggingElementScope.endDrag(r)?(c=o.getPlaceholderIndex(a,i),t.dndDrop&&(l=o.invokeCallback(e,t.dndDrop,r,c,l)),l!==!0&&e.$eval(t.dndList).splice(c,0,l),o.invokeCallback(e,t.dndInserted,r,c,l),void o.stopDragover(d,n)):o.stopDragover(d,n)},0)}}),t.ngDisabled&&(e.disabled=e.$eval(t.ngDisabled),e.disabled&&interact(n[0]).dropzone(!1),e.$watch(t.ngDisabled,function(t,r){e.disabled=t,t?interact(n[0]).dropzone(!1):interact(n[0]).dropzone(!0)}))}}return n.prototype.isMouseInFirstHalf=function(e,n,t){void 0===t&&(t=!1);var r=e.dragEvent,d=t?r.clientX:r.clientY,i=n.getBoundingClientRect(),a=t?i.width:i.height,o=t?i.left:i.top;return d<o+a/2},n.prototype.stopDragover=function(e,n){return e.remove(),n.removeClass("dndDragover"),!0},n.prototype.getPlaceholderIndex=function(e,n){return Array.prototype.indexOf.call(e.children,n)},n.prototype.invokeCallback=function(e,n,t,r,d){return void 0===d&&(d=null),this.$parse(n)(e,{event:t,index:r,item:d||void 0})},n.prototype.getPlaceholderElement=function(e){var n;return angular.forEach(e.children(),function(e){var t=angular.element(e);t.hasClass("dndPlaceholder")&&(n=t)}),n||angular.element("<li class='dndPlaceholder'></li>")},n=__decorate([e.directive("$parse","$timeout","dndService")],n)}();angular.module("dndLists").directive("dndList",n)}(dndList||(dndList={}));